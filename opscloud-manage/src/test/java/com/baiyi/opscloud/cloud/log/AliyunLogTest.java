package com.baiyi.opscloud.cloud.log;

import com.alibaba.fastjson.JSON;
import com.aliyun.openservices.log.common.Project;
import com.baiyi.opscloud.BaseUnit;
import com.baiyi.opscloud.domain.generator.opscloud.OcServerGroup;
import com.baiyi.opscloud.domain.param.cloud.AliyunLogMemberParam;
import com.baiyi.opscloud.facade.aliyun.AliyunLogFacade;
import com.baiyi.opscloud.service.server.OcServerGroupService;
import org.junit.jupiter.api.Test;

import javax.annotation.Resource;
import java.util.List;

/**
 * @Author baiyi
 * @Date 2020/6/13 1:51 下午
 * @Version 1.0
 */
public class AliyunLogTest extends BaseUnit {

    @Resource
    private AliyunLogCenter aliyunLogCenter;

    @Resource
    private OcServerGroupService ocServerGroupService;

    @Resource
    private AliyunLogFacade aliyunLogFacade;

    @Test
    void testGetProjects() {
        List<Project> projects = aliyunLogCenter.getProjects("");
        System.err.println(JSON.toJSONString(projects));
    }

    @Test
    void test() {
        //    String groupList = "group_zebragroup_coin-centergroup_search-platform-centergroup_search-platform-parsergroup_search-platform-dumpgroup_item-stock-centergroup_promotion-platform-restgroup_sentry-proxygroup_trade-zebragroup_trade-lifegroup_wms-apigroup_zebra-admingroup_workorder-admingroup_user-message-servicegroup_zebra-platformgroup_user-customer-webgroup_trade-web-refundgroup_trade-web-ordersellergroup_trade-web-orderbuyergroup_trade-web-orderadmingroup_trade-web-buygroup_trade-messagegroup_trade-eagleyegroup_trade-data-syncgroup_trade-cartgroup_trade-biz-messagegroup_trade-admin-toolsgroup_trackgroup_ticket-systemgroup_ticket-custom-webgroup_templategroup_supply-chain-webgroup_supply-chain-centergroup_spark-datamininggroup_share-dynamic-centergroup_data-centergroup_bigdata-center-admingroup_shardinggroup_data-center-bgroup_data-center-sheetgroup_sentry-clientgroup_sentry-centergroup_seller-shop-admingroup_seller-shopgroup_seller-resource-centergroup_seller-portalgroup_seller-open-apigroup_seller-message-centergroup_seller-exportgroup_seller-es-syncergroup_seller-auth-managergroup_seller-admingroup_selection-center-admingroup_selection-centergroup_search-platform-indexergroup_search-admingroup_score-centergroup_risk-asyncgroup_recommender-servergroup_purchase-admingroup_promotion-search-platform-webgroup_promotion-search-platformgroup_promotion-platform-web-sellergroup_promotion-platform-web-admingroup_promotion-admingroup_platform-wikigroup_platform-shortergroup_platform-sentry-jstorm-loghubgroup_platform-sentry-jstorm-httpgroup_platform-middleware-testgroup_platform-logstashgroup_platform-kibanagroup_platform-jstormgroup_platform-datavgroup_platform-dataflow-consolegroup_platform-dataflowgroup_platform-canalgroup_othersgroup_order-admingroup_open-platform-gatewaygroup_open-platform-admingroup_open-apigroup_msms-webgroup_msms-crmgroup_msms-appgroup_msms-apigroup_monitor-fontgroup_member-web-jobgroup_member-webgroup_member-benefits-platformgroup_member-benefitsgroup_marketing-strategy-centergroup_marketing-strategy-admingroup_lottery-centergroup_logistics-apigroup_logistics-admingroup_live-platformgroup_life-shop-admingroup_life-minigroup_life-apigroup_life-admingroup_libra-baoming-admingroup_libra-admingroup_jumpservergroup_jiragroup_item-searchgroup_item-detailgroup_item-audit-admingroup_item-admin-shopgroup_item-admin-mnggroup_invoice-seller-webgroup_invoice-centergroup_invoice-admin-webgroup_intranet-webgroup_hqbs-webgroup_hqbs-platformgroup_hqbs-appgroup_hqbs-admingroup_grafanagroup_goods-admingroup_gim-web-shopgroup_gim-web-platformgroup_gim-web-appgroup_gim-statisticgroup_gim-message-centergroup_gim-centergroup_ggj-statisticsgroup_ggj-sso-newgroup_ggj-ssogroup_ggj-admin-sellergroup_ggj-admingroup_getwaygroup_gateway-perfgroup_gateway-admingroup_finance-pay-checkgroup_finance-financial-admingroup_finance-customs-clearancegroup_finance-credit-cardgroup_finance-checkstandgroup_finance-cashier-deskgroup_finance-admingroup_finance-accounting-webgroup_finance-accountinggroup_dubbo-monitorgroup_dubbo-admingroup_doc-fontgroup_dmsgroup_deploy-testgroup_delivery-center-webgroup_delivery-center-admingroup_DBASgroup_data-web-sysmonitorgroup_data-servergroup_data-reportgroup_data-monitorgroup_data-legogroup_data-decorate-servergroup_data-collectiongroup_data-burygroup_data-admingroup_cms-admingroup_cinema-servicegroup_bigdata-testgroup_bigdata-emrgroup_bigdata-crmgroup_bigdata-connect-resourcesgroup_bigdata-bigroup_benefits-rechargegroup_benefits-finance-insurancegroup_benefits-admingroup_bank-frontendgroup_account-toolgroup_abtestgroup_workorder-centergroup_trade-supportgroup_trade-settlegroup_trade-service-searchgroup_trade-service-ordergroup_trade-service-consigngroup_trade-centergroup_ticket-centergroup_shop-delivery-expiregroup_seller-managegroup_seller-datagroup_seller-centergroup_seller-apigroup_search-centergroup_risk-centergroup_purchase-centergroup_promotion-platformgroup_promotion-centergroup_product-centergroup_platform-servicegroup_pay-centergroup_logistics-centergroup_log-centergroup_life-sellergroup_libra-centergroup_item-tag-centergroup_item-rate-centergroup_item-price-centergroup_item-erp-centergroup_item-centergroup_item-category-propertygroup_item-audit-centergroup_hqbs-user-centergroup_goods-centergroup_finance-paygroup_financegroup_common-servicegroup_admin-support-centergroup_admin-log-centergroup_reward-jobgroup_promotion-platform-jobgroup_cinema-service-jobgroup_member-benefits-platform-jobgroup_search-business-platformgroup_lottery-center-jobgroup_tag-factory-jobgroup_selection-center-admin-jobgroup_item-rate-platformgroup_item-business-centergroup_seller-governance-webgroup_search-platform-heragroup_search-platform-maintenancegroup_bigdata-config-center-customergroup_bigdata-config-center-producergroup_bigdata-config-center-showgroup_user-webgroup_user-ggj-employee-servicegroup_trade-service-integrationgroup_scenic-servicegroup_scenic-service-jobgroup_trade-service-certificategroup_item-footprint-centergroup_item-logistics-subscribergroup_item-card-centergroup_sentry-taskgroup_car-servicegroup_commission-gatewaygroup_trade-reconciliationgroup_car-service-jobgroup_recharge-servicegroup_recharge-service-jobgroup_tds-webappgroup_tds-mvcgroup_tds-jobgroup_tds-api-servicegroup_shop-home-webgroup_rubangroup_ruban-admingroup_dataflow-publishgroup_user-center-servicegroup_seller-supportgroup_tarzangroup_benefits-flightgroup_aws-member-servicegroup_aws-commission-usergroup_aws-commission-calculategroup_sign-platformgroup_ruban-timergroup_item-mediagroup_benefit-proxy-centegroup_benefit-proxy-centergroup_ubs-admingroup_travel-centergroup_travel-center-jobgroup_score-consumergroup_report-centergroup_user-biz-servicegroup_ordersyn-servicegroup_ordersyn-service-jobgroup_risk-jobgroup_identity-authgroup_identity-auth-providergroup_pandora-copier-admingroup_pay-cardgroup_pandora-copier-admin-webgroup_pandoracopieradmingroup_ubs-judge-centergroup_ubs-data-centergroup_strategy-centergroup_pgcgroup_pgc-admingroup_pgc-jobgroup_bianquegroup_bianque-onsgroup_api-gatewaygroup_centralbankgroup_centralbank-analysisgroup_centralbank-invokegroup_petrol-servicegroup_petrol-service-jobgroup_mission-jobgroup_mission-webgroup_recommender-server-abtestgroup_benefits-guidegroup_benefits-guide-rpcgroup_benefits-life-paygroup_barriergroup_data-indexgroup_member-web-apigroup_live-jobgroup_ticket-app-webgroup_gim-extern-servicegroup_financial-missiongroup_bigdata-data-schedulegroup_centralbank-managegroup_data-lego-statisticgroup_recharge-centergroup_recharge-center-jobgroup_car-center-jobgroup_car-centergroup_pay-walletgroup_search-platform-center-abgroup_search-platform-taggroup_data-bury-qualitygroup_charles-basegroup_risk-admin-platform-webgroup_hawkeyegroup_logistics-webgroup_logistics-providergroup_logistics-subscribegroup_trade-timeoutgroup_livelihood-centergroup_livelihood-center-jobgroup_user-center-admingroup_platform-trackgroup_score-center-managegroup_beauty-servicegroup_beauty-admin-servicegroup_pay-gatewaygroup_beauty-service-jobgroup_juliagroup_portalgroup_charles-authoritygroup_pay-coregroup_pandora-copier-admingroup_item-recon-centergroup_item-recon-admingroup_charles-authority-centergroup_tag-factorygroup_tag-factory-admingroup_university-centergroup_university-webgroup_springboot-module-demogroup_quality-control-admingroup_quality-control-centergroup_charles-pushgroup_mpsgroup_mps-admingroup_mps-jobgroup_item-quality-admingroup_item-quality-centergroup_aws-heragroup_bigdata-data-apigroup_trade-dev-admingroup_xcheck-consolegroup_score-center-jobgroup_benefit-product-centergroup_benefit-produt-center-jobgroup_benefits-tracing-centergroup_benefits-inspec-centergroup_uploader-consolegroup_uploader-servergroup_benefits-inspec-jobgroup_search-business-admingroup_httpdns-managegroup_httpdns-workgroup_traffic-import-taskgroup_traffic-import-centergroup_live-admingroup_analson-admingroup_seller-activity-centergroup_xcheck-executorgroup_piao-centergroup_piao-center-jobgroup_ggj-admin-financegroup_launch-centergroup_search-platform-upsgroup_cbt-centergroup_rocketmq-opsgroup_bot-idugroup_bot-manage-web-platformgroup_trade-managergroup_pay-recongroup_traffic-admingroup_trade-service-businessgroup_pangu-webgroup_pangu-workergroup_mission-admin-webgroup_bigdata-data-supportgroup_aws-member-coregroup_member-gateway-centergroup_benefits-cubegroup_user-wechat-servicegroup_delayqueue-servergroup_user-dingding-servicegroup_dynamic-datasourcegroup_wholesalegroup_elastic";
        String groupList = "group_zebra group_coin-center group_search-platform-center group_search-platform-parser group_search-platform-dump group_item-stock-center group_promotion-platform-rest group_sentry-proxy group_trade-zebra group_trade-life group_wms-api group_zebra-admin group_workorder-admin group_user-message-service group_zebra-platform group_user-customer-web group_trade-web-refund group_trade-web-orderseller group_trade-web-orderbuyer group_trade-web-orderadmin group_trade-web-buy group_trade-message group_trade-eagleye group_trade-data-sync group_trade-cart group_trade-biz-message group_trade-admin-tools group_track group_ticket-system group_ticket-custom-web group_template group_supply-chain-web group_supply-chain-center group_spark-datamining group_share-dynamic-center group_data-center group_bigdata-center-admin group_sharding group_data-center-b group_data-center-sheet group_sentry-client group_sentry-center group_seller-shop-admin group_seller-shop group_seller-resource-center group_seller-portal group_seller-open-api group_seller-message-center group_seller-export group_seller-es-syncer group_seller-auth-manager group_seller-admin group_selection-center-admin group_selection-center group_search-platform-indexer group_search-admin group_score-center group_risk-async group_recommender-server group_purchase-admin group_promotion-search-platform-web group_promotion-search-platform group_promotion-platform-web-seller group_promotion-platform-web-admin group_promotion-admin group_platform-wiki group_platform-shorter group_platform-sentry-jstorm-loghub group_platform-sentry-jstorm-http group_platform-middleware-test group_platform-logstash group_platform-kibana group_platform-jstorm group_platform-datav group_platform-dataflow-console group_platform-dataflow group_platform-canal group_others group_order-admin group_open-platform-gateway group_open-platform-admin group_open-api group_msms-web group_msms-crm group_msms-app group_msms-api group_monitor-font group_member-web-job group_member-web group_member-benefits-platform group_member-benefits group_marketing-strategy-center group_marketing-strategy-admin group_lottery-center group_logistics-api group_logistics-admin group_live-platform group_life-shop-admin group_life-mini group_life-api group_life-admin group_libra-baoming-admin group_libra-admin group_jumpserver group_jira group_item-search group_item-detail group_item-audit-admin group_item-admin-shop group_item-admin-mng group_invoice-seller-web group_invoice-center group_invoice-admin-web group_intranet-web group_hqbs-web group_hqbs-platform group_hqbs-app group_hqbs-admin group_grafana group_goods-admin group_gim-web-shop group_gim-web-platform group_gim-web-app group_gim-statistic group_gim-message-center group_gim-center group_ggj-statistics group_ggj-sso-new group_ggj-sso group_ggj-admin-seller group_ggj-admin group_getway group_gateway-perf group_gateway-admin group_finance-pay-check group_finance-financial-admin group_finance-customs-clearance group_finance-credit-card group_finance-checkstand group_finance-cashier-desk group_finance-admin group_finance-accounting-web group_finance-accounting group_dubbo-monitor group_dubbo-admin group_doc-font group_dms group_deploy-test group_delivery-center-web group_delivery-center-admin group_DBAS group_data-web-sysmonitor group_data-server group_data-report group_data-monitor group_data-lego group_data-decorate-server group_data-collection group_data-bury group_data-admin group_cms-admin group_cinema-service group_bigdata-test group_bigdata-emr group_bigdata-crm group_bigdata-connect-resources group_bigdata-bi group_benefits-recharge group_benefits-finance-insurance group_benefits-admin group_bank-frontend group_account-tool group_abtest group_workorder-center group_trade-support group_trade-settle group_trade-service-search group_trade-service-order group_trade-service-consign group_trade-center group_ticket-center group_shop-delivery-expire group_seller-manage group_seller-data group_seller-center group_seller-api group_search-center group_risk-center group_purchase-center group_promotion-platform group_promotion-center group_product-center group_platform-service group_pay-center group_logistics-center group_log-center group_life-seller group_libra-center group_item-tag-center group_item-rate-center group_item-price-center group_item-erp-center group_item-center group_item-category-property group_item-audit-center group_hqbs-user-center group_goods-center group_finance-pay group_finance group_common-service group_admin-support-center group_admin-log-center group_reward-job group_promotion-platform-job group_cinema-service-job group_member-benefits-platform-job group_search-business-platform group_lottery-center-job group_tag-factory-job group_selection-center-admin-job group_item-rate-platform group_item-business-center group_seller-governance-web group_search-platform-hera group_search-platform-maintenance group_bigdata-config-center-customer group_bigdata-config-center-producer group_bigdata-config-center-show group_user-web group_user-ggj-employee-service group_trade-service-integration group_scenic-service group_scenic-service-job group_trade-service-certificate group_item-footprint-center group_item-logistics-subscriber group_item-card-center group_sentry-task group_car-service group_commission-gateway group_trade-reconciliation group_car-service-job group_recharge-service group_recharge-service-job group_tds-webapp group_tds-mvc group_tds-job group_tds-api-service group_shop-home-web group_ruban group_ruban-admin group_dataflow-publish group_user-center-service group_seller-support group_tarzan group_benefits-flight group_aws-member-service group_aws-commission-user group_aws-commission-calculate group_sign-platform group_ruban-timer group_item-media group_benefit-proxy-cente group_benefit-proxy-center group_ubs-admin group_travel-center group_travel-center-job group_score-consumer group_report-center group_user-biz-service group_ordersyn-service group_ordersyn-service-job group_risk-job group_identity-auth group_identity-auth-provider group_pandora-copier-admin group_pay-card group_pandora-copier-admin-web group_pandoracopieradmin group_ubs-judge-center group_ubs-data-center group_strategy-center group_pgc group_pgc-admin group_pgc-job group_bianque group_bianque-ons group_api-gateway group_centralbank group_centralbank-analysis group_centralbank-invoke group_petrol-service group_petrol-service-job group_mission-job group_mission-web group_recommender-server-abtest group_benefits-guide group_benefits-guide-rpc group_benefits-life-pay group_barrier group_data-index group_member-web-api group_live-job group_ticket-app-web group_gim-extern-service group_financial-mission group_bigdata-data-schedule group_centralbank-manage group_data-lego-statistic group_recharge-center group_recharge-center-job group_car-center-job group_car-center group_pay-wallet group_search-platform-center-ab group_search-platform-tag group_data-bury-quality group_charles-base group_risk-admin-platform-web group_hawkeye group_logistics-web group_logistics-provider group_logistics-subscribe group_trade-timeout group_livelihood-center group_livelihood-center-job group_user-center-admin group_platform-track group_score-center-manage group_beauty-service group_beauty-admin-service group_pay-gateway group_beauty-service-job group_julia group_portal group_charles-authority group_pay-core group_pandora-copier-admin group_item-recon-center group_item-recon-admin group_charles-authority-center group_tag-factory group_tag-factory-admin group_university-center group_university-web group_springboot-module-demo group_quality-control-admin group_quality-control-center group_charles-push group_mps group_mps-admin group_mps-job group_item-quality-admin group_item-quality-center group_aws-hera group_bigdata-data-api group_trade-dev-admin group_xcheck-console group_score-center-job group_benefit-product-center group_benefit-produt-center-job group_benefits-tracing-center group_benefits-inspec-center group_uploader-console group_uploader-server group_benefits-inspec-job group_search-business-admin group_httpdns-manage group_httpdns-work group_traffic-import-task group_traffic-import-center group_live-admin group_analson-admin group_seller-activity-center group_xcheck-executor group_piao-center group_piao-center-job group_ggj-admin-finance group_launch-center group_search-platform-ups group_cbt-center group_rocketmq-ops group_bot-idu group_bot-manage-web-platform group_trade-manager group_pay-recon group_traffic-admin group_trade-service-business group_pangu-web group_pangu-worker group_mission-admin-web group_bigdata-data-support group_aws-member-core group_member-gateway-center group_benefits-cube group_user-wechat-service group_delayqueue-server group_user-dingding-service group_dynamic-datasource group_wholesale group_elastic";

        String[] groups = groupList.split(" ");

        for (String groupName : groups) {
            OcServerGroup ocServerGroup = ocServerGroupService.queryOcServerGroupByName(groupName);
            if (ocServerGroup == null) {
                System.err.println(groupName);
            } else {
                AliyunLogMemberParam.AddLogMember addLogMember = new  AliyunLogMemberParam.AddLogMember();
                addLogMember.setLogId(1);
                addLogMember.setServerGroupId(ocServerGroup.getId());

                aliyunLogFacade.addLogMember(addLogMember );

            }
        }

    }

}